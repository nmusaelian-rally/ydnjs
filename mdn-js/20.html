<html>
    <head>
        <script type="text/javascript">
            //module and closure singleton example:
            
            var counter = (function(){    
                var privateCounter = 0;  //private,no direct outside access
                function changeBy(val){  //private
                    privateCounter += val;
                }
                return {                    //public api
                    increment: function(){  //three closures that share the same environment
                        changeBy(1);
                    },
                    decrement: function(){
                        changeBy(-1);
                    },
                    getValue: function(){
                        return privateCounter;
                    }
                }
            })(); // this anonymous function is executed once as soon as it's been defined.
            
            console.log(counter.getValue()); //0
            for(var i=0;i<3;i++){
                counter.increment();
            }
            console.log(counter.getValue()); //3
            counter.decrement();
            console.log(counter.getValue()); //2
            //see a non-singleton versoin of it in 21.html
        </script>
    </head>
</html>